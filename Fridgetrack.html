<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Fridge & Pantry Tracker</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      background: #f0f0f0;
      margin: 0;
      padding: 20px;
    }
    h1 {
      margin-bottom: 30px;
    }
    #items-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
    }
    .item {
      width: calc((100% / 6) - 20px);
      max-width: 140px;
      background-color: #ccc;
      border-radius: 15px;
      padding: 20px;
      cursor: pointer;
      transition: background-color 0.3s;
      text-align: center;
      user-select: none;
    }
    .item img {
      width: 100px;
      height: 100px;
      display: block;
      margin: auto;
    }
    .label {
      margin-top: 10px;
      font-weight: bold;
    }
    .timestamp {
      margin-top: 8px;
      font-size: 0.9em;
      color: #333;
    }
    .controls {
      margin-top: 30px;
    }
    .controls button {
      margin: 0 10px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
    .remove-btn, .freeze-btn {
      margin-top: 10px;
      display: block;
      width: 100%;
      background: #eee;
      border: 1px solid #999;
      border-radius: 8px;
      font-size: 0.9em;
      cursor: pointer;
      user-select: none;
      padding: 5px 0;
      transition: background-color 0.2s;
    }
    .remove-btn:hover, .freeze-btn:hover {
      background-color: #ddd;
    }
  </style>
</head>
<body>
  <h1>Fridge & Pantry Tracker</h1>
  <div id="items-container"></div>

  <div class="controls">
    <button onclick="advanceDays(1)">+1 Day</button>
    <button onclick="advanceDays(3)">+3 Days</button>
    <button onclick="advanceDays(6)">+6 Days</button>
    <button onclick="resetTimeOffset()">Reset Time</button>
  </div>

  <script>
    const items = [
      { id: 'bread', label: 'Bread', img: 'https://upload.wikimedia.org/wikipedia/commons/thumb/1/1f/Bread_icon.svg/1024px-Bread_icon.svg.png', freshDays: 2, cautionDays: 5 },
      { id: 'pork', label: 'Pork', img: 'https://upload.wikimedia.org/wikipedia/commons/thumb/d/d2/Pork_icon.svg/1024px-Pork_icon.svg.png', freshDays: 2, cautionDays: 4 },
      { id: 'beef', label: 'Beef', img: 'https://upload.wikimedia.org/wikipedia/commons/thumb/1/1b/Beef_icon.svg/1024px-Beef_icon.svg.png', freshDays: 3, cautionDays: 5 },
      { id: 'chicken', label: 'Chicken', img: 'https://upload.wikimedia.org/wikipedia/commons/thumb/e/e2/Chicken_icon.svg/1024px-Chicken_icon.svg.png', freshDays: 1, cautionDays: 3 },
      { id: 'butter', label: 'Butter', img: 'https://upload.wikimedia.org/wikipedia/commons/thumb/e/e0/Butter_icon.svg/1024px-Butter_icon.svg.png', freshDays: 10, cautionDays: 20 },
      { id: 'milk', label: 'Milk', img: 'https://upload.wikimedia.org/wikipedia/commons/thumb/6/66/Milk_bottle_icon.svg/1024px-Milk_bottle_icon.svg.png', freshDays: 3, cautionDays: 7 },
      { id: 'cereal', label: 'Cereal', img: 'https://upload.wikimedia.org/wikipedia/commons/thumb/9/99/Cereal_icon.svg/1024px-Cereal_icon.svg.png', freshDays: 30, cautionDays: 60 },
      { id: 'instant_noodles', label: 'Instant Noodles', img: 'https://upload.wikimedia.org/wikipedia/commons/thumb/0/0f/Instant_noodles_icon.svg/1024px-Instant_noodles_icon.svg.png', freshDays: 90, cautionDays: 180 },
      { id: 'pasta', label: 'Pasta', img: 'https://upload.wikimedia.org/wikipedia/commons/thumb/6/6f/Pasta_icon.svg/1024px-Pasta_icon.svg.png', freshDays: 60, cautionDays: 120 },
      { id: 'rice', label: 'Rice', img: 'https://upload.wikimedia.org/wikipedia/commons/thumb/b/b4/Rice_icon.svg/1024px-Rice_icon.svg.png', freshDays: 90, cautionDays: 180 }
    ];

    let timeOffsetDays = 0;

    function renderItems() {
      const container = document.getElementById('items-container');
      container.innerHTML = '';
      items.forEach(item => {
        const itemDiv = document.createElement('div');
        itemDiv.className = 'item';
        itemDiv.id = item.id;
        itemDiv.onclick = () => logItem(item.id);

        const img = document.createElement('img');
        img.src = item.img;
        img.alt = item.label;

        const label = document.createElement('div');
        label.className = 'label';
        label.textContent = item.label;

        const timestamp = document.createElement('div');
        timestamp.className = 'timestamp';
        const storedTime = localStorage.getItem(item.id);
        if (storedTime) {
          const inserted = new Date(storedTime);
          const now = getSimulatedNow();
          const diffMs = now - inserted;
          const days = Math.floor(diffMs / (1000 * 60 * 60 * 24));
          const hours = Math.floor((diffMs / (1000 * 60 * 60)) % 24);
          timestamp.textContent = `Added ${days}d ${hours}h ago`;
        } else {
          timestamp.textContent = 'Not added';
        }

        const removeBtn = document.createElement('button');
        removeBtn.className = 'remove-btn';
        removeBtn.textContent = 'Remove';
        removeBtn.onclick = (e) => {
          e.stopPropagation();
          removeItem(item.id);
        };

        const freezeBtn = document.createElement('button');
        freezeBtn.className = 'freeze-btn';
        freezeBtn.textContent = 'Add to Freezer';
        freezeBtn.onclick = (e) => {
          e.stopPropagation();
          addToFreezer(item.id);
        };

        itemDiv.appendChild(img);
        itemDiv.appendChild(label);
        itemDiv.appendChild(timestamp);
        itemDiv.appendChild(removeBtn);
        itemDiv.appendChild(freezeBtn);

        container.appendChild(itemDiv);
      });
    }

    function logItem(itemId) {
      const now = new Date().toISOString();
      localStorage.setItem(itemId, now);
      renderItems();
      updateItemColors();
    }

    function removeItem(itemId) {
      localStorage.removeItem(itemId);
      renderItems();
      updateItemColors();
    }

    function addToFreezer(itemId) {
      const storedTime = localStorage.getItem(itemId);
      if (!storedTime) return alert("Add the item to fridge first!");

      let freezerList = JSON.parse(localStorage.getItem('freezerItems') || '{}');
      freezerList[itemId] = storedTime;
      localStorage.setItem('freezerItems', JSON.stringify(freezerList));
      localStorage.removeItem(itemId);
      renderItems();
      updateItemColors();
      renderFreezer();
    }

    function removeFromFreezer(itemId) {
      let freezerList = JSON.parse(localStorage.getItem('freezerItems') || '{}');
      delete freezerList[itemId];
      localStorage.setItem('freezerItems', JSON.stringify(freezerList));
      renderFreezer();
    }

    function getSimulatedNow() {
      const now = new Date();
      now.setDate(now.getDate() + timeOffsetDays);
      return now;
    }

    function updateItemColors() {
      const now = getSimulatedNow();
      items.forEach(item => {
        const itemDiv = document.getElementById(item.id);
        if (!itemDiv) return;
        const storedTime = localStorage.getItem(item.id);

        if (!storedTime) {
          itemDiv.style.backgroundColor = '#ccc';
          return;
        }

        const inserted = new Date(storedTime);
        const diffDays = (now - inserted) / (1000 * 60 * 60 * 24);

        if (diffDays <= item.freshDays) {
          itemDiv.style.backgroundColor = 'lightgreen';
        } else if (diffDays <= item.cautionDays) {
          itemDiv.style.backgroundColor = 'yellow';
        } else {
          itemDiv.style.backgroundColor = 'lightcoral';
        }
      });
    }

    function advanceDays(days) {
      timeOffsetDays += days;
      renderItems();
      updateItemColors();
      renderFreezer();
    }

    function resetTimeOffset() {
      timeOffsetDays = 0;
      renderItems();
      updateItemColors();
      renderFreezer();
    }

    function renderFreezer() {
      let freezerContainer = document.getElementById('freezer-container');
      if (!freezerContainer) {
        freezerContainer = document.createElement('div');
        freezerContainer.id = 'freezer-container';
        freezerContainer.style.marginTop = '40px';
        freezerContainer.style.textAlign = 'center';
        document.body.appendChild(freezerContainer);

        const freezerTitle = document.createElement('h2');
        freezerTitle.textContent = 'Freezer Items';
        freezerContainer.appendChild(freezerTitle);
      }

      const freezerList = JSON.parse(localStorage.getItem('freezerItems') || '{}');

      freezerContainer.querySelectorAll('.freezer-item').forEach(el => el.remove());

      if (Object.keys(freezerList).length === 0) {
        const noItems = document.createElement('div');
        noItems.textContent = 'No items in freezer.';
        noItems.className = 'freezer-item';
        freezerContainer.appendChild(noItems);
        return;
      }

      Object.entries(freezerList).forEach(([itemId, timestamp]) => {
        const item = items.find(i => i.id === itemId);
        if (!item) return;

        const freezerItemDiv = document.createElement('div');
        freezerItemDiv.className = 'freezer-item';
        freezerItemDiv.style.backgroundColor = '#eee';
        freezerItemDiv.style.borderRadius = '12px';
        freezerItemDiv.style.margin = '10px auto';
        freezerItemDiv.style.padding = '10px 15px';
        freezerItemDiv.style.maxWidth = '300px';
        freezerItemDiv.style.display = 'flex';
        freezerItemDiv.style.alignItems = 'center';
        freezerItemDiv.style.justifyContent = 'space-between';

        const labelDiv = document.createElement('div');
        labelDiv.textContent = item.label;
        labelDiv.style.fontWeight = 'bold';

        const timeAdded = new Date(timestamp);
        const now = getSimulatedNow();
        const diffMs = now - timeAdded;
        const days = Math.floor(diffMs / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diffMs / (1000 * 60 * 60)) % 24);

        const ageDiv = document.createElement('div');
        ageDiv.textContent = `Added ${days}d ${hours}h ago`;

        const removeBtn = document.createElement('button');
        removeBtn.textContent = 'Remove from Freezer';
        removeBtn.style.cursor = 'pointer';
        removeBtn.style.marginLeft = '15px';
        removeBtn.onclick = () => removeFromFreezer(itemId);

        freezerItemDiv.appendChild(labelDiv);
        freezerItemDiv.appendChild(ageDiv);
        freezerItemDiv.appendChild(removeBtn);

        freezerContainer.appendChild(freezerItemDiv);
      });
    }

    renderItems();
    updateItemColors();
    renderFreezer();
  </script>
</body>
</html>
